/*
 * Copyright (C) 2016-2017 Intel Corporation <www.intel.com>
 *
 * SPDX-License-Identifier:	GPL-2.0
 */

/dts-v1/;
#include "skeleton.dtsi"
#include <dt-bindings/reset/altr,rst-mgr-s10.h>

/ {
	model = "Terasic DE10-Pro";
	compatible = "altr,socfpga-stratix10", "altr,socfpga";

	#address-cells = <2>;
	#size-cells = <1>;

	chosen {
		bootargs = "console=ttyS0,115200";
	};

	aliases {
		ethernet0 = &gmac0;
	};

	memory {
		name = "memory";
		device_type = "memory";
		reg = <0x0 0x0 0x80000000>; /* 2GB */
	};

	regulator_3_3v: 3-3-v-regulator {
		compatible = "regulator-fixed";
		regulator-name = "3.3V";
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
	};

	soc {
		#address-cells = <2>;
		#size-cells = <1>;
		compatible = "simple-bus";
		device_type = "soc";
		ranges;
		u-boot,dm-pre-reloc;

		rst: rstmgr@ffd11000 {
			#reset-cells = <1>;
			compatible = "altr,rst-mgr";
			reg = <0x0 0xffd11000 0x100>;
			altr,modrst-offset = <0x20>;
		};

		gmac0: ethernet@ff800000 {
			compatible = "altr,socfpga-stmmac", "snps,dwmac-3.74a", "snps,dwmac";
			reg = <0x0 0xff800000 0x2000>;
			interrupts = <0 90 4>;
			interrupt-names = "macirq";
			mac-address = [00 00 00 00 00 00];
			resets = <&rst EMAC0_RESET>;
			reset-names = "stmmaceth";
			phy-mode = "rgmii";
			phy-addr = <0xffffffff>; /* probe for phy addr */
			max-speed = <1000>;
			txd0-skew-ps = <0>; /* -420ps */
			txd1-skew-ps = <0>; /* -420ps */
			txd2-skew-ps = <0>; /* -420ps */
			txd3-skew-ps = <0>; /* -420ps */
			rxd0-skew-ps = <420>; /* 0ps */
			rxd1-skew-ps = <420>; /* 0ps */
			rxd2-skew-ps = <420>; /* 0ps */
			rxd3-skew-ps = <420>; /* 0ps */
			txen-skew-ps = <0>; /* -420ps */
			txc-skew-ps = <900>; /* 0ps */
			rxdv-skew-ps = <420>; /* 0ps */
			rxc-skew-ps = <1680>; /* 780ps */
			status = "okay";
		};

		mmc0: dwmmc0@0xff808000 {
			compatible = "altr,socfpga-dw-mshc";
			reg = <0x0 0xff808000 0x1000>;
			interrupts = <0 96 4>;
			num-slots = <1>;
			broken-cd;
			bus-width = <4>;
			fifo-depth = <0x400>;
			cap-mmc-highspeed;
			cap-sd-highspeed;
			drvsel = <3>;
			smplsel = <0>;
			status = "okay";
			u-boot,dm-pre-reloc;
			vmmc-supply = <&regulator_3_3v>;
			vqmmc-supply = <&regulator_3_3v>;
		};

		uart0: serial0@ffc02000 {
			compatible = "snps,dw-apb-uart";
			reg = <0x0 0xffc02000 0x1000>;
			interrupts = <0 108 4>;
			reg-shift = <2>;
			reg-io-width = <4>;
			status = "okay";
		};

		usbphy0: usbphy@0 {
			#phy-cells = <0>;
			compatible = "usb-nop-xceiv";
			status = "okay";
		};

		usb1: usb@ffb00000 {
			compatible = "snps,dwc2";
			reg = <0x0 0xffb40000 0xffff>;
			interrupts = <0 94 4>;
			phys = <&usbphy0>;
			phy-names = "usb2-phy";
			status = "disabled";
		};

		gpio0: gpio@ffc03200 {
			#address-cells = <1>;
			#size-cells = <0>;
			compatible = "snps,dw-apb-gpio";
			reg = <0x0 0xffc03200 0x100>;
			status = "disabled";

			porta: gpio-controller@0 {
				compatible = "snps,dw-apb-gpio-port";
				bank-name = "porta";
				gpio-controller;
				#gpio-cells = <2>;
				snps,nr-gpios = <24>;
				reg = <0>;
				interrupt-controller;
				#interrupt-cells = <2>;
				interrupts = <0 110 4>;
			};
		};

		gpio1: gpio@ffc03300 {
			#address-cells = <1>;
			#size-cells = <0>;
			compatible = "snps,dw-apb-gpio";
			reg = <0x0 0xffc03300 0x100>;
			status = "okay";

			portb: gpio-controller@0 {
				compatible = "snps,dw-apb-gpio-port";
				bank-name = "portb";
				gpio-controller;
				#gpio-cells = <2>;
				snps,nr-gpios = <24>;
				reg = <0>;
				interrupt-controller;
				#interrupt-cells = <2>;
				interrupts = <0 111 4>;
			};
		};
	};
};
